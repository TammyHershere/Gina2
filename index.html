<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è‹±æ–‡é¸ä¸­æ–‡ â€” åè©å°éŠæˆ²</title>
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --accent:#2b7cff;
      --ok:#2ecc71;
      --bad:#e74c3c;
      --muted:#6b7280;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg),#eef2fb);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{
      width:100%;
      max-width:720px;
      background:var(--card);
      border-radius:12px;
      box-shadow:0 8px 30px rgba(20,30,60,0.08);
      padding:24px;
    }
    h1{margin:0 0 8px;font-size:20px;}
    p.desc{margin:0 0 16px;color:var(--muted);}
    .top-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
    .score, .progress{font-weight:600;color:var(--muted);}
    .card{
      background:#fbfdff;
      border-radius:10px;
      padding:20px;
      margin-bottom:16px;
      border:1px solid rgba(43,124,255,0.06);
    }
    .word{
      font-size:34px;
      font-weight:700;
      letter-spacing:0.6px;
      margin-bottom:8px;
    }
    .hint{color:var(--muted);margin-bottom:12px;}
    .options{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
    }
    button.opt{
      padding:12px;
      border-radius:8px;
      border:1px solid rgba(20,30,60,0.06);
      background:#fff;
      cursor:pointer;
      font-size:15px;
      text-align:left;
      box-shadow:0 2px 6px rgba(10,20,40,0.03);
      transition:transform .08s ease, box-shadow .08s;
    }
    button.opt:hover{transform:translateY(-3px);}
    button.opt.correct{background:rgba(46,204,113,0.12);border-color:rgba(46,204,113,0.2);}
    button.opt.wrong{background:rgba(231,76,60,0.08);border-color:rgba(231,76,60,0.2);}
    .footer{display:flex;gap:8px;justify-content:space-between;align-items:center;margin-top:14px;}
    .controls{display:flex;gap:8px;}
    .btn{
      padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600;
    }
    .btn.primary{background:var(--accent);color:#fff;}
    .btn.ghost{background:transparent;border:1px solid rgba(20,30,60,0.06);}
    .result{
      padding:14px;border-radius:10px;background:#f8fafc;border:1px solid rgba(20,30,60,0.03);
      color:var(--muted);font-weight:600;
    }
    .small{font-size:13px;color:var(--muted);}
    footer.note{margin-top:12px;text-align:center;color:var(--muted);font-size:13px;}
    @media(max-width:480px){
      .word{font-size:28px;}
      .options{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="è‹±æ–‡é¸ä¸­æ–‡éŠæˆ²">
    <div class="top-row">
      <div>
        <h1>è‹±æ–‡é¸ä¸­æ–‡ â€” åè© (Nouns)</h1>
        <p class="desc">çœ‹è‹±æ–‡é¸å‡ºæ­£ç¢ºçš„ä¸­æ–‡æ„æ€ã€‚ç­”å°æœƒè¨˜åˆ†ï¼ŒçµæŸå¯é‡æ–°é–‹å§‹ã€‚</p>
      </div>
      <div class="score" id="score">åˆ†æ•¸ï¼š0 / 0</div>
    </div>

    <div class="card" id="card">
      <div class="word" id="english">--</div>
      <div class="hint small" id="progress">é¡Œç›® 0 / 0</div>
      <div class="options" id="options" role="list"></div>
    </div>

    <div class="footer">
      <div class="controls">
        <button class="btn primary" id="nextBtn">é–‹å§‹éŠæˆ²</button>
        <button class="btn ghost" id="restartBtn">é‡æ–°é–‹å§‹</button>
      </div>
      <div class="result" id="status">æº–å‚™å¥½äº†å°±æŒ‰ã€Œé–‹å§‹éŠæˆ²ã€ã€‚</div>
    </div>

    <footer class="note">å–®å­—ä¾†æºï¼švolume, project, cereal, insurance, course, account, monument, jail, fable, glacier, description, operation, executive, category, excerpt</footer>
  </div>

  <script>
    // é¡Œåº«ï¼ˆè‹±æ–‡ -> ä¸­æ–‡ï¼‰ï¼šå…¨éƒ¨ç‚ºåè©
    const WORDS = [
      {eng:"volume", zh:"é«”ç©ï¼›å®¹é‡"},
      {eng:"project", zh:"è¨ˆç•«ï¼›å°ˆæ¡ˆ"},
      {eng:"cereal", zh:"ç©€ç‰©ï¼›éº¥ç‰‡"},
      {eng:"insurance", zh:"ä¿éšª"},
      {eng:"course", zh:"èª²ç¨‹"},
      {eng:"account", zh:"å¸³æˆ¶ï¼›å ±å‘Š"},
      {eng:"monument", zh:"ç´€å¿µç¢‘"},
      {eng:"jail", zh:"ç›£ç„"},
      {eng:"fable", zh:"å¯“è¨€"},
      {eng:"glacier", zh:"å†°æ²³"},
      {eng:"description", zh:"æè¿°"},
      {eng:"operation", zh:"æ“ä½œï¼›é‹ä½œ"},
      {eng:"executive", zh:"ä¸»ç®¡"},
      {eng:"category", zh:"é¡åˆ¥"},
      {eng:"excerpt", zh:"æ‘˜éŒ„"}
    ];

    // DOM
    const englishEl = document.getElementById('english');
    const optionsEl = document.getElementById('options');
    const scoreEl = document.getElementById('score');
    const progressEl = document.getElementById('progress');
    const statusEl = document.getElementById('status');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');

    // éŠæˆ²ç‹€æ…‹
    let questions = [];
    let currentIndex = -1;
    let score = 0;
    let answered = false;

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function prepareQuestions(){
      // æ·±æ‹·è²ä¸¦æ‰“äº‚é †åº
      questions = shuffle(WORDS.slice());
      currentIndex = -1;
      score = 0;
      updateScore();
      statusEl.textContent = 'éŠæˆ²å·²å°±ç·’ï¼ŒæŒ‰ã€Œé–‹å§‹éŠæˆ²ã€é–‹å§‹ã€‚';
    }

    function updateScore(){
      scoreEl.textContent = `åˆ†æ•¸ï¼š${score} / ${questions.length}`;
    }

    function renderNext(){
      if(currentIndex + 1 >= questions.length){
        // å…¨éƒ¨ç­”å®Œ
        englishEl.textContent = 'éŠæˆ²çµæŸ ğŸ‰';
        optionsEl.innerHTML = '';
        progressEl.textContent = `é¡Œç›® ${questions.length} / ${questions.length}`;
        statusEl.textContent = `å®Œæˆï¼ä½ çš„å¾—åˆ†ï¼š ${score} / ${questions.length}`;
        nextBtn.textContent = 'å†æ¬¡éŠç©';
        answered = true;
        return;
      }
      currentIndex++;
      answered = false;
      const q = questions[currentIndex];
      englishEl.textContent = q.eng;
      progressEl.textContent = `é¡Œç›® ${currentIndex+1} / ${questions.length}`;
      statusEl.textContent = 'è«‹é¸å‡ºæ­£ç¢ºçš„ä¸­æ–‡æ„æ€ã€‚';

      // å»º optionsï¼šæ­£ç¢º + 3 å€‹éŒ¯èª¤ (ä¸é‡è¤‡)
      const pool = WORDS.map(w=>w.zh).filter(z=>z !== q.zh);
      const wrongs = shuffle(pool).slice(0,3);
      const opts = shuffle([q.zh, ...wrongs]);

      optionsEl.innerHTML = '';
      opts.forEach(optText=>{
        const btn = document.createElement('button');
        btn.className = 'opt';
        btn.type = 'button';
        btn.innerText = optText;
        btn.onclick = () => handleAnswer(btn, optText === q.zh);
        optionsEl.appendChild(btn);
      });

      nextBtn.textContent = 'è·³åˆ°ä¸‹ä¸€é¡Œ';
    }

    function handleAnswer(button, isCorrect){
      if(answered) return; // é˜²æ­¢é‡è¤‡é»æ“Š
      answered = true;
      // æ¨™ç¤ºæ‰€æœ‰é¸é …ï¼šæ­£ç¢ºç‚ºç¶ ï¼Œèª¤é¸ç‚ºç´…
      const btns = Array.from(optionsEl.querySelectorAll('button.opt'));
      btns.forEach(b=>{
        if(b.innerText === questions[currentIndex].zh){
          b.classList.add('correct');
        }
      });
      if(isCorrect){
        button.classList.add('correct');
        score++;
        statusEl.textContent = 'ç­”å°ï¼âœ…';
      } else {
        button.classList.add('wrong');
        statusEl.textContent = `ç­”éŒ¯â€¦ æ­£ç¢ºç­”æ¡ˆï¼š${questions[currentIndex].zh}`;
      }
      updateScore();
    }

    // æŒ‰éˆ•äº‹ä»¶
    nextBtn.addEventListener('click', () => {
      // å¦‚æœé‚„æ²’é–‹å§‹ï¼ˆquestions é•·åº¦ç‚º 0 æˆ– currentIndex === -1ï¼‰ï¼Œå…ˆæº–å‚™
      if(questions.length === 0 || nextBtn.textContent === 'é–‹å§‹éŠæˆ²'){
        prepareQuestions();
        renderNext();
        return;
      }
      // å¦‚æœå·²ç¶“åœ¨é€²è¡Œä¸”å°šæœªå›ç­”ï¼ŒæŒ‰ä¸‹ä¸€é¡Œè¦–ç‚ºè·³éï¼ˆè¦–åŒéŒ¯èª¤ä½†ä¸åŠ åˆ†ï¼‰
      if(!answered){
        statusEl.textContent = `å·²è·³éï¼Œæ­£ç¢ºç­”æ¡ˆï¼š${questions[currentIndex].zh}`;
        // é¡¯ç¤ºæ­£ç¢ºè§£ç­”æ¨£å¼
        const btns = Array.from(optionsEl.querySelectorAll('button.opt'));
        btns.forEach(b=>{
          if(b.innerText === questions[currentIndex].zh) b.classList.add('correct');
        });
        answered = true;
      } else {
        renderNext();
      }
    });

    restartBtn.addEventListener('click', () => {
      prepareQuestions();
      renderNext();
    });

    // åˆå§‹ï¼šæº–å‚™å¥½é¡Œåº«ä½†ä¸è‡ªå‹•é–‹å§‹ï¼ˆæŒ‰é–‹å§‹å¾Œæ‰å‡ºé¡Œï¼‰
    prepareQuestions();
  </script>
</body>
</html>
